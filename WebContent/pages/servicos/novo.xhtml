<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui"
	template="/include/template.xhtml">

	<ui:define name="conteudo">
		<div id="loader" class="load-bar" style="display: none">
			<div class="bar"></div>
			<div class="bar"></div>
			<div class="bar"></div>
		</div>


		<h6 style="margin: 20px 0px 0px 10px">
			<a href="../index.jsf?faces-redirect=true"
				style="color: blue !important">Inicio</a> / Novo Serviço
		</h6>
		<div class="login-box w3-card" style="margin-top:30px;">
			<div class="box login-box-body">
				<h:form enctype="multipart/form-data">
				<legend style="text-align: center;">Novo Serviço </legend>
					
					<div class="form-group has-feedback">
						<b:inputText type="text" styleClass="form-control" label="Nome da entidade"
							placeholder="Nome completo" value="#{servicoMBean.servico.nomeEntidade}"
							required="true" id="nome" requiredMessage="Nome é obrigatorio." ><f:validateLength minimum="1" maximum="30" /></b:inputText>
						<i class="fa fa-user form-control-feedback"></i>
					</div>
			
					<div class="form-group has-feedback">
                        <b:inputText type="date" styleClass="form-control" placeholder="Data da solicitação" value="#{servicoMBean.servico.dataSolicitacao}"
                                   label="Data da solicitação"  required="true" id="DataServico" 
                                     requiredMessage="Data é obrigatorio."><f:convertDateTime pattern="yyyy-MM-dd" /></b:inputText>
                        <i class="fa fa-user form-control-feedback" ></i>
                    </div>
                    
                   
                    <h:outputLabel for="usuario" value="Usuario Requerente" /> 
                     <b:selectOneMenu id="usuario" effect="fade" dynamic="true" style="width:100%;display:flex !important;" value="#{servicoMBean.servico.usuario}" converter="usuarioConversor">
   						 <f:selectItems value="#{usuarioMBean.usuariosList}" var="usuario" itemValue="#{usuario}" itemLabel="#{usuario.nome}" />
					</b:selectOneMenu>
					
					
					 <h:outputLabel for="tipoServico" value="Tipo de serviço" /> 
					<b:selectOneMenu id="tipoServico" value="#{servicoMBean.servico.tipoServico}" >
						<f:selectItems value="#{servicoMBean.tipoServico}" var="g" itemValue="#{g}" itemLabel="#{g.label}" />
					</b:selectOneMenu>
					
					 <h:outputLabel for="documento" value="Documentos" /> 
					<p:fileUpload id="documento" fileUploadListener="#{servicoMBean.handleFileUpload}"  mode="advanced" dragDropSupport="true" sizeLimit="10000"
                  multiple="true" style="max-width:300px !important;"></p:fileUpload>

					<div class="row">
						<p:spacer height="10" />
						<div class="col-xs-12">
							<b:commandButton styleClass="btn btn-success btn-block"
								action="#{servicoMBean.abrirServico}" onclick="showBar()"
								oncomplete="if(args.validationFailed){hideBar()}"
								value="Abrir Serviço" />
						</div>
					</div>
				</h:form>
			</div>
		</div>
	</ui:define>
</ui:composition>